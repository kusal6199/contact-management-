<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  th:replace="~{base :: parent(~{::content}, ~{::title}, ~{::script})}"
>
  <!-- <title data-th-text="${loggedInUser.name}+' | SCM'"></title> -->
  <title>Search | Contact</title>

  <!-- <section
    th:fragment="content"
    class="flex justify-center flex-col items-center"
  >
    <div data-th-if="${loggedInUser}">
      <div data-th-replace="~{user/sidebar:: sidebar}"></div>
    </div>

    <h1 class="text-3xl font-bold">Search Results</h1>

    <form data-th-action="@{/user/contacts/search}">
      <div
        class="flex flex-col md:flex-row md:justify-start md:items-center gap-4 mb-4"
      >
        <div class="dark:text-gray-800">
          <select
            name="field"
            id="countries"
            class="block w-full px-4 py-2.5 bg-neutral-secondary-medium border border-default-medium text-heading text-sm rounded-base focus:ring-brand focus:border-brand shadow-xs placeholder:text-body"
          >
            <option selected class="dark:text-black-800">select</option>
            <option value="name">Name</option>
            <option value="phone">Phone</option>
            <option value="email">Email</option>
          </select>
        </div>

        <div class="relative w-full md:max-w-sm">
          <div
            class="absolute inset-y-0 left-0 flex items-center ps-3 pointer-events-none"
          >
            <svg
              class="w-4 h-4 text-body"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-width="2"
                d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"
              />
            </svg>
          </div>
          <input
            name="keyword"
            type="text"
            id="input-group-1"
            class="block w-full ps-9 pe-3 py-2 bg-neutral-secondary-medium border border-default-medium text-heading text-sm rounded-base focus:ring-brand focus:border-brand shadow-xs placeholder:text-body dark: text-gray-700"
            placeholder="Search"
          />
        </div>
        <button class="px-3 py-2 bg-gray-800 text-white rounded" type="submit">
          search
        </button>
      </div>
    </form>
  </section> -->

  <section th:fragment="content" class="flex min-h-screen">
    <!-- Sidebar -->
    <div data-th-if="${loggedInUser}">
      <div data-th-replace="~{user/sidebar :: sidebar}"></div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col items-center justify-start pt-8">
      <h1 class="text-3xl font-bold mb-6">Search Results</h1>

      <form data-th-action="@{/user/contacts/search}" class="w-full max-w-2xl">
        <div class="flex flex-col md:flex-row md:items-center gap-4 mb-4">
          <div class="dark:text-gray-800 w-full md:w-40">
            <select
              name="field"
              class="block w-full px-4 py-2.5 bg-neutral-secondary-medium border border-default-medium text-heading text-sm rounded-base"
            >
              <option selected>Select</option>
              <option value="name">Name</option>
              <option value="phone">Phone</option>
              <option value="email">Email</option>
            </select>
          </div>

          <div class="relative w-full">
            <div
              class="absolute inset-y-0 left-0 flex items-center ps-3 pointer-events-none"
            >
              üîç
            </div>
            <input
              name="keyword"
              type="text"
              class="block w-full ps-9 pe-3 py-2 bg-neutral-secondary-medium border border-default-medium rounded-base"
              placeholder="Search"
            />
          </div>

          <button
            class="px-4 py-2 bg-gray-800 text-white rounded whitespace-nowrap"
            type="submit"
          >
            Search
          </button>
        </div>
      </form>

      <div
        class="relative overflow-x-auto rounded-lg bg-white dark:bg-gray-900 shadow-md"
      >
        <table class="min-w-full text-sm text-left text-body">
          <thead
            class="text-sm text-body bg-neutral-secondary-medium border-b border-t border-default-medium"
          >
            <tr>
              <th scope="col" class="px-6 py-3 font-medium">Name</th>
              <th scope="col" class="px-6 py-3 font-medium">Phone</th>
              <th scope="col" class="px-6 py-3 font-medium">Links</th>
              <th scope="col" class="px-6 py-3 font-medium">Action</th>
            </tr>
          </thead>

          <tbody>
            <tr
              data-th-each="contact: ${pageContacts.content}"
              class="bg-neutral-primary-soft border-b border-default hover:bg-neutral-secondary-medium"
            >
              <th
                scope="row"
                class="flex items-center px-6 py-4 text-heading whitespace-nowrap"
              >
                <img
                  th:src="'https://res.cloudinary.com/dnmfhw4ct/image/upload/'+${contact.cloudinaryImagePublicId}"
                  class="w-9 h-9 sm:w-10 sm:h-10 rounded-full object-cover"
                  alt=""
                />
                <div class="ps-3 min-w-0">
                  <div
                    class="text-base font-semibold truncate"
                    data-th-text="${contact.name}"
                  ></div>
                  <div
                    class="font-normal text-body truncate"
                    data-th-text="${contact.email}"
                  ></div>
                </div>
              </th>

              <td class="px-6 py-4" data-th-text="${contact.phoneNumber}"></td>
              <td class="px-6 py-4">
                <div class="flex space-x-4 items-center">
                  <a
                    th:href="${contact.linkedInLink}"
                    th:text="${contact.linkedInLink}"
                    target="_blank"
                    class="text-blue-600 hover:underline"
                  >
                  </a>
                  <a
                    th:href="${contact.websiteLink}"
                    th:text="${contact.websiteLink}"
                    target="_blank"
                    class="text-blue-600 hover:underline"
                  >
                  </a>
                </div>
              </td>

              <td class="px-6 py-4 flex space-x-2">
                <!-- Edit Button -->
                <a
                  th:href="@{/user/contacts/edit/{id}(id=${contact.id})}"
                  class="inline-block px-3 py-1 rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"
                >
                  Edit
                </a>

                <!-- Delete Button -->
                <form
                  th:action="@{/user/contacts/delete/{id}(id=${contact.id})}"
                  method="post"
                  onsubmit="return confirm('Are you sure you want to delete this contact?');"
                >
                  <button
                    type="submit"
                    class="inline-block px-3 py-1 rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700"
                  >
                    Delete
                  </button>
                </form>
              </td>
            </tr>

            <!-- Add more rows similarly -->
          </tbody>
        </table>

        <div
          class="pagination_container p-5 text-center bg-white dark:bg-gray-800"
        >
          <nav aria-label="Page navigation example">
            <ul class="flex -space-x-px text-sm">
              <li>
                <a
                  th:if="${!pageContacts.first}"
                  th:href="@{'/user/contacts/view?size=' + ${pageSize} + '&page=' + ${pageContacts.number - 1}}"
                  class="flex items-center justify-center text-body bg-neutral-secondary-medium border border-default-medium hover:bg-neutral-tertiary-medium hover:text-heading font-medium rounded-s-base text-sm px-3 h-10 focus:outline-none transition-colors"
                >
                  Previous
                </a>
                <span
                  th:if="${pageContacts.first}"
                  class="flex items-center justify-center text-gray-400 bg-gray-100 border border-default-medium rounded-s-base text-sm px-3 h-10 cursor-not-allowed"
                >
                  Previous
                </span>
              </li>

              <li
                th:each="index : ${#numbers.sequence(0, pageContacts.totalPages - 1)}"
              >
                <a
                  th:href="@{'/user/contacts/view?page=' + ${index} + '&size=' + ${pageSize}}"
                  th:classappend="${index == pageContacts.number} ? 'bg-blue-600 text-white border-blue-600' : 'text-body bg-white border-gray-300 hover:bg-gray-50 hover:text-heading'"
                  th:attr="aria-current=${index == pageContacts.number} ? 'page' : null"
                  class="flex items-center justify-center font-medium text-sm w-10 h-10 border focus:outline-none transition-colors"
                >
                  <span
                    th:text="${index + 1}"
                    class="dark:text-gray-700"
                  ></span>
                </a>
              </li>

              <li>
                <a
                  th:if="${!pageContacts.last}"
                  th:href="@{'/user/contacts/view?size=' + ${pageSize} + '&page=' + ${pageContacts.number + 1}}"
                  class="flex items-center justify-center text-body bg-neutral-secondary-medium border border-default-medium hover:bg-neutral-tertiary-medium hover:text-heading font-medium rounded-e-base text-sm px-3 h-10 focus:outline-none transition-colors"
                >
                  Next
                </a>
                <span
                  th:if="${pageContacts.last}"
                  class="flex items-center justify-center text-gray-400 bg-gray-100 border border-default-medium rounded-e-base text-sm px-3 h-10 cursor-not-allowed"
                >
                  Next
                </span>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </section>

  <script th:fragment="script"></script>
</html>
